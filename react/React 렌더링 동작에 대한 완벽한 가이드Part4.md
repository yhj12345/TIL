# React 렌더링 동작에 대한 완벽한 가이드

### React-Redux와 렌더링 동작

다양한 형태의 "CONTEXT VS REDUX?!?!?!?!?"는 제가 리액트 커뮤니티에서 가장 많이 보는 질문인 것 같습니다.(Redux와 Context는 서로 다른 일을 하는 도구이므로 그러한 이분법적인 질문은 애초부터 잘못됐습니다.)

아무튼 사람들이 이런 질문에 대해 반복적으로 주장하는 것 중 하나는 "React-Redux는 실제로 렌더링해야 하는 컴포넌트만 리렌더링하므로 컨텍스트보다 낫다"라는 것입니다.

어느 정도는 맞는 말이지만, 실제로는 그것보다 훨씬 더 미묘한 차이가 있습니다.

#### React-Redux 구독(Subscriptions)

저는 많은 사람들이 "React-Redux는 내부적으로 컨텍스트를 사용한다"라는 문구를 반복해 사용하는 것을 보았습니다. 기술적으로 그렇지만, React-Redux는 컨텍스트를 사용하여 현재 상태 값이 아닌 Redux 저장소 인스턴스를 전달합니다. 즉, 항상 동일한 컨텍스트 값을 `<ReactReduxContext.Provider>`에 전달합니다.

Redux 저장소는 액션이 디스패치될 때마다 모든 구독자 알림 콜백을 실행한다는 것을 기억해야합니다. Redux를 사용해야 하는 UI 계층은 Redux 저장소를 구독하고, 구독자 콜백을 통해 최신 상태를 읽고, 값을 비교하고, 관련 데이터가 변경된 경우 강제로 리렌더링합니다. 구독 콜백 프로세스는 전적으로 리액트 외부에서 일어나며 React-Redux가 특정 리액트 컴포넌트에 필요한 데이터가 변경되었음을 인지하는 경우에만 리액트가 관여합니다.(`mapState` 또는 `useSelector`의 반환 값에 기반)

이로 인해 컨텍스트와 매우 다른 성능 특성이 나타납니다. 항상 더 적은 수의 컴포넌트가 렌더링될 가능성이 높지만 React-Redux는 저장소의 상태가 업데이트될 때마다 전체 컴포넌트 트리에 대해 항상 `mapState/useSelector` 함수를 실행해야 합니다. 대부분의 경우 이러한 셀렉터를 실행하는 비용은 리액트가 다른 렌더 패스를 수행하는 비용보다 적기 때문에 일반적으로 유익하지만, 해야만 하는 일입니다. 그러나 이러한 셀렉터가 비용이 큰 반환을 수행하거나 실수로 새 값을 반환하는 경우 속도가 느려질 수 있습니다.
